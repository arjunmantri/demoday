<!DOCTYPE html>
<html>
  <head>
  <style>
.center {
    margin-left: auto;
    margin-right: auto;
    width: 70%;
}
</style>
<style>
.right {
    position: absolute;
    right: 0px;
    width: 300px;
}
</style>
    <title></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
     <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  

 </head>
  <body ng-app="" ng-controller="companyController" style="margin-top: -50px;margin-left: -50px;margin-right: -50px;">
      <nav class="navbar navbar-default" style="padding-bottom: 10px;box-shadow: 3px 3px 5px #888888; background-color: #F5F5F5;">
  <div class="container-fluid">
    <div class="navbar-header">
      
    </div>
    <p>Last logged in:<p id="demo"></p><script>
document.getElementById("demo").innerHTML = Date();
</script></td>
     </tr>
     </table>
    </div>
  </div>
</nav>

            <form name="myForm">
                      <div class="container" style="margin-bottom: 30px">                
                      <canvas id="canvas" width="5" height="5"></canvas>
                             
                         <center><legend style="font-style: 30px;">Company Details</legend></center>
                           <div>
                              Company Name:
                                        <input type="text" ng-model="companyname" placeholder="" class="form-control" >
                                 
                              </div><br>
                                <div>
                              Address:
                                        <input type="text" ng-model="address" placeholder="" class="form-control" >
                                 
                              </div><br>
                           <div>
                              Country:
                                        <input type="text" ng-model="country" placeholder="" class="form-control" >
                                 
                              </div><br>
                              <div>
                              ZipCode:
                                        <input type="text" ng-model="zipcode" placeholder="" class="form-control" >
                                 
                              </div><br>
                         
                            <div>
                             Overview:
                                    <textarea ng-model="overview" class="form-control" rows="5"></textarea>
                              
                            </div><br>
                                <span></span>
                                  <div>
                              Url:
                                        <input type="text" ng-model="url" placeholder="" class="form-control" >
                                 
                              </div><br>
                              <div>
                              Founded: 
                                       <input type="date" ng-model="founded" placeholder="" class="form-control">

                             </div><br>                              
                             <div>
                                <input type="button" ng-click="saveInfo()" class="btn btn-primary" value="Save Changes" style="margin-left:-15px">
                                <span></span>
                                <input type="reset" class="btn btn-default" value="Cancel">
                              </div><br><br>
                          
                        </div>
                  </form>
                  
        <script>
        function companyController($scope,$http,$location) {
           
          
		  	$scope.image=function() {
  				var canvas = document.getElementById("canvas");
				var dataURL = canvas.toDataURL();
				console.log("here we are");
				console.log(dataURL);
  			};
               
               $scope.saveInfo = function() {
               console.log("In function");
                  $http({
                        method: 'POST',
                        url: '/companyProfile',
                        data: { 
                                "CompanyName" :$scope.companyname,
                                "Address":$scope.address,
                                "Country":$scope.country,
                                "ZipCode":$scope.zipcode,
                                "Overview":$scope.overview,
                                "Url":$scope.url,
                                "Founded":$scope.founded                                            
                                
                            }
                        
                     }).success(function(response){
                       
                        alert(JSON.stringify(response));
                        
                        if(response.save == "Success")
                          $http({
                        	method: 'GET',
                        	url: '/companyProfile/'
                        	})
                        else
                          window.location = '/';
                    }).error(function(error){
                        alert("error");
                    });
                };
 
        }
        </script> 
  </body>
</html>